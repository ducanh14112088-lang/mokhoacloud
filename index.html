<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>iBYPASS SHOP - Bypass iCloud Giá Rẻ Nhất 2025</title>
  <style>
    :root{--pri:#00ff9d;--bg:#0a0a0f;--card:#111118}
    body{margin:0;font-family:Segoe UI,sans-serif;background:var(--bg);color:#e0e7ff;min-height:100vh;background:radial-gradient(circle at top,rgba(0,255,157,0.08),#0a0a0f)}
    header{position:sticky;top:0;z-index:99;background:rgba(10,10,15,0.95);backdrop-filter:blur(12px);border-bottom:1px solid #333;padding:14px 20px;display:flex;justify-content:space-between;align-items:center}
    .logo{font-size:30px;font-weight:900;background:linear-gradient(90deg,#00ff9d,#00d4ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    nav a{color:#e0e7ff;text-decoration:none;padding:10px 18px;border-radius:10px;transition:.2s}
    nav a:hover{background:rgba(0,255,157,0.15)}
    .btn{background:linear-gradient(90deg,#00ff9d,#00d4ff);color:#000;padding:14px 32px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:0 4px 20px rgba(0,255,157,0.4);font-size:18px}
    .hero{text-align:center;padding:120px 20px;background:url('https://images.unsplash.com/photo-1639762681485-074b7f938ba0') center/cover;position:relative}
    .hero::after{content:'';position:absolute;inset:0;background:linear-gradient(45deg,rgba(10,10,15,0.9),rgba(0,0,0,0.6))}
    .hero h1{font-size:58px;margin:0;background:linear-gradient(90deg,#00ff9d,#00d4ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .section{max-width:1100px;margin:0 auto;padding:80px 20px}
    .card{background:var(--card);border:1px solid rgba(0,255,157,0.2);border-radius:18px;padding:35px;text-align:center;box-shadow:0 10px 40px #0006}
    .important{background:#300;border:2px solid #ff6b6b;padding:20px;border-radius:16px;margin:20px 0}
    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.95);display:none;align-items:center;justify-content:center;z-index:999}
    .modal{max-width:420px;width:90%;background:#111;padding:30px;border-radius:18px;border:2px solid var(--pri);text-align:center}
    input{width:100%;padding:14px;margin:10px 0;border-radius:12px;border:1px solid #333;background:#000;color:#fff;font-size:16px}
  </style>
</head><body>

<header>
  <div><span class="logo">iBYPASS</span> SHOP</div>
  <nav>
    <a href="index.html">Trang chủ</a>
    <a href="dashboard.html">Cửa hàng</a>
    <span id="status" style="color:#00ff9d;font-weight:600">Chưa đăng nhập</span>
    <button class="btn" id="authBtn">Đăng nhập</button>
    <button class="btn" id="adminBtn" style="display:none;background:#ff0066;color:#fff">ADMIN PANEL</button>
  </nav>
</header>

<div class="hero">
  <div style="position:relative;z-index:2">
    <h1>iCLOUD BYPASS GIÁ RẺ NHẤT 2025</h1>
    <p>iPhone 11 → 17 Pro Max • iPad A12–M4 • iOS 18.6–26.1<br>Chỉ từ <b>90.000₫</b> • Full thông báo, FaceTime • Xử lý 5–30 phút</p>
    <a href="dashboard.html" class="btn" style="padding:18px 50px;font-size:22px">MUA NGAY TỪ 90K</a>
  </div>
</div>

<div class="section">
  <div class="card">
    <h2 style="color:#00ff9d">Thông tin chuyển khoản</h2>
    <div style="background:rgba(0,212,255,0.1);padding:20px;border-radius:12px;font-size:20px">
      STK: <span style="color:#00ff9d;font-size:26px">1404123456</span><br>
      MB Bank – NGUYEN DUC ANH
    </div>
    <div class="important">
      <h3 style="color:#ff6b6b;margin:0">BẮT BUỘC ghi nội dung:</h3>
      <code style="font-size:24px;color:#00ff9d;background:#000;padding:10px 20px;border-radius:12px" id="noidung">Đăng nhập để xem</code>
      <p style="margin:10px 0 0;color:#ffaa00">Tiền sẽ được cộng <b>tự động trong 1–5 phút</b></p>
    </div>
    <div style="margin-top:25px;padding:16px;background:rgba(0,255,157,0.1);border-radius:12px">
      Telegram: <a href="https://t.me/dung_tool_wallet" target="_blank" style="color:#00ff9d;font-size:24px">@dung_tool_wallet</a>
    </div>
  </div>
</div>

<!-- Modal -->
<div id="authModal" class="modal-backdrop">
  <div class="modal">
    <h2 style="color:#00ff9d;margin-top:0">Đăng nhập / Đăng ký</h2>
    <input type="email" id="email" placeholder="Email của bạn">
    <input type="password" id="pass1" placeholder="Mật khẩu">
    <input type="password" id="pass2" placeholder="Nhập lại mật khẩu (khi đăng ký)" style="display:none">
    <div style="margin:20px 0;display:flex;gap:12px;justify-content:center">
      <button class="btn" id="btnLogin">Đăng nhập</button>
      <button class="btn" id="btnSignup" style="background:#0066ff">Đăng ký</button>
      <button class="btn" style="background:#666" onclick="closeModal()">Hủy</button>
    </div>
    <p id="msg" style="color:#ff6b6b;height:24px;margin:10px 0"></p>
  </div>
</div>

<script>
// Fix lỗi – code đầy đủ
async function hash(p) {
  const data = new TextEncoder().encode(p);
  const hashBuffer = await crypto.subtle.digest('SHA-256', data);
  return Array.from(new Uint8Array(hashBuffer)).map(b => b.toString(16).padStart(2, '0')).join('');
}

function getUsers() { return JSON.parse(localStorage.getItem('users') || '[]'); }
function saveUsers(users) { localStorage.setItem('users', JSON.stringify(users)); }

function currentUser() {
  const email = localStorage.getItem('user');
  if (!email) return null;
  return getUsers().find(u => u.email === email);
}

function updateUI() {
  const u = currentUser();
  const status = document.getElementById('status');
  const authBtn = document.getElementById('authBtn');
  const adminBtn = document.getElementById('adminBtn');
  const noidung = document.getElementById('noidung');

  if (u) {
    status.textContent = u.email + (u.email === '998822jj' ? ' (Admin)' : '');
    status.style.color = u.email === '998822jj' ? '#ff0066' : '#00ff9d';
    authBtn.textContent = 'Đăng xuất';
    adminBtn.style.display = u.email === '998822jj' ? 'inline-block' : 'none';
    noidung.textContent = u.email;
  } else {
    status.textContent = 'Chưa đăng nhập';
    status.style.color = '#aaa';
    authBtn.textContent = 'Đăng nhập';
    adminBtn.style.display = 'none';
    noidung.textContent = 'Đăng nhập để xem';
  }
}

function closeModal() { document.getElementById('authModal').style.display = 'none'; }

// Tạo admin mặc định
if (getUsers().length === 0) {
  hash('yeugame22').then(h => {
    saveUsers([{email: '998822jj', pass: h, balance: 999999999, orders: [], isAdmin: true}]);
  });
}

// Nút auth
document.getElementById('authBtn').onclick = () => {
  const u = currentUser();
  if (u) {
    if (confirm('Đăng xuất?')) {
      localStorage.removeItem('user');
      updateUI();
    }
    return;
  }
  document.getElementById('authModal').style.display = 'flex';
  document.getElementById('pass2').style.display = 'none';
  document.getElementById('msg').textContent = '';
};

// Đăng nhập
document.getElementById('btnLogin').onclick = async () => {
  const email = document.getElementById('email').value.trim();
  const pass = document.getElementById('pass1').value;
  const msg = document.getElementById('msg');
  if (!email || !pass) { msg.textContent = 'Nhập đầy đủ'; return; }

  const users = getUsers();
  const user = users.find(u => u.email === email);
  if (!user) { msg.textContent = 'Email chưa đăng ký'; return; }
  if (await hash(pass) !== user.pass) { msg.textContent = 'Sai mật khẩu'; return; }

  localStorage.setItem('user', email);
  updateUI();
  closeModal();
  alert('Đăng nhập thành công!');
};

// Chế độ đăng ký
document.getElementById('btnSignup').onclick = () => {
  document.getElementById('pass2').style.display = 'block';
  document.getElementById('msg').textContent = 'Nhập lại mật khẩu để hoàn tất';
};

// Đăng ký khi Enter ở pass2
document.getElementById('pass2').addEventListener('keyup', async e => {
  if (e.key === 'Enter') {
    const email = document.getElementById('email').value.trim();
    const p1 = document.getElementById('pass1').value;
    const p2 = document.getElementById('pass2').value;
    const msg = document.getElementById('msg');
    if (!email || !p1 || !p2) { msg.textContent = 'Nhập đầy đủ'; return; }
    if (p1 !== p2) { msg.textContent = 'Mật khẩu không khớp'; return; }
    if (p1.length < 6) { msg.textContent = 'Mật khẩu ít nhất 6 ký tự'; return; }

    let users = getUsers();
    if (users.some(u => u.email === email)) { msg.textContent = 'Email đã tồn tại'; return; }

    const h = await hash(p1);
    users.push({email, pass: h, balance: 0, orders: [], isAdmin: false});
    saveUsers(users);
    localStorage.setItem('user', email);
    updateUI();
    closeModal();
    alert('Đăng ký thành công!');
  }
});

// Admin
document.getElementById('adminBtn').onclick = () => { location.href = 'dashboard.html'; };

updateUI();
setInterval(updateUI, 2000);
</script>
</body>
</html>
